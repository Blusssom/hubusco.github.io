import eventsList from"./events_list.js";const monthNames=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],whichMonthNames=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],daysOfWeek=["понедельник","вторник","среда","четверг","пятница","суббота","воскресенье"],getDay=e=>{let t=e.getDay();return(t=0==t?7:t)-1},currentDate=new Date,currentYear=currentDate.getFullYear();let year=currentYear;const currentMonth=currentDate.getMonth()+1;let month=currentMonth;const currentDay=currentDate.getDate();let activeDay=currentDay;const currentWeekDayNum=getDay(new Date);let weekDayNum=currentWeekDayNum;const createCalendar=(e,t,a)=>{(e=document.querySelector(e)).innerHTML="";var n=a-1,c=new Date(t,n);let r=`
    <table class='calendar__table'>
        <caption class='calendar__date'>${monthNames[a-1]} ${t}</caption>
        <thead>
            <tr>
                <th>Пн</th>
                <th>Вт</th>
                <th>Ср</th>
                <th>Чт</th>
                <th>Пт</th>
                <th>Сб</th>
                <th>Вс</th>
            </tr>
        </thead>
        <tbody>
            <tr data-calendar-week>
    `;for(let e=0;e<getDay(c);e++)r+="<td></td>";for(let e=0;c.getMonth()==n;e++)r+=`<td class='${currentMonth==a?"current-month-day":"not-current-month-day"} special-day' data-calendar-day='${e+1}'>${c.getDate()}</td>`,getDay(c)%7==6&&(r+="</tr><tr data-calendar-week>"),c.setDate(c.getDate()+1);if(0!=getDay(c))for(let e=getDay(c);e<7;e++)r+="<td></td>";r+="</tr></tbody></table>",e.innerHTML=r},selectInCalendar=()=>{document.querySelectorAll("[data-calendar-day]").forEach(e=>{(e.textContent==activeDay||e.textContent==currentDay&&month==currentMonth)&&e.classList.add("current-day")}),document.querySelectorAll("[data-calendar-week]").forEach(t=>{const a=t.querySelectorAll("[data-calendar-day]");a.forEach(e=>{e.textContent==currentDay&&month==currentMonth&&t.classList.add("current-week"),e.textContent==activeDay&&addDataInFE(a)})})},addDataInChoiceDay=()=>{document.querySelector(".events__choice-day").textContent=activeDay,document.querySelector(".events__choice-month").textContent=whichMonthNames[month-1],document.querySelector(".events__choice-week").textContent=daysOfWeek[getDay(new Date(year,month-1,activeDay))]},addDataInFE=e=>{document.querySelector(".events__finance-evenings-period-month").textContent=whichMonthNames[month-1],document.querySelector(".events__finance-evenings-period-start").textContent=Number(e[0].textContent),document.querySelector(".events__finance-evenings-period-end").textContent=Number(e[e.length-1].textContent);const n=document.querySelector(".events__finance-evenings-days");n.innerHTML="",e.forEach(e=>{var t=document.createElement("li"),a=(t.classList.add("events__finance-evenings-day"),t.classList.add("events__finance-evenings-day--current"),t.id=e.textContent,document.createElement("div")),e=(a.classList.add("events__finance-evenings-number"),e.textContent<10?a.textContent="0"+e.textContent:a.textContent=e.textContent,document.createElement("div"));e.innerHTML=whichMonthNames[month-1],e.classList.add("events__finance-evenings-month"),t.appendChild(a),t.appendChild(e),n.appendChild(t)}),document.querySelectorAll(".events__finance-evenings-day").forEach(e=>{e.getAttribute("id")==activeDay&&e.classList.add("active")})},changeDayFromArrows=()=>{document.querySelectorAll("[data-calendar-arrow]").forEach(a=>{a.addEventListener("click",()=>{var e,t=document.querySelectorAll("[data-calendar-day]");a.classList.contains("events__choice-arrow-left")?(1!=activeDay?(t.forEach(e=>{(e.textContent!=activeDay||e.textContent==currentDay)&&e.classList.contains("current-month-day")||e.classList.remove("current-day")}),activeDay--,weekDayNum--):1==activeDay&&month>currentMonth&&(e=month-1,month--,activeDay=new Date(year,month,0).getDate(),weekDayNum=getDay(new Date(year,month-1,activeDay)),createCalendar(".events__calendar",year,e),selectInCalendar(),addDataInChoiceDay(),addEventsList()),changeEventInFE(),changeArrowsColor()):a.classList.contains("events__choice-arrow-right")&&(activeDay!=new Date(year,month,0).getDate()?(t.forEach(e=>{(e.textContent!=activeDay||e.textContent==currentDay)&&e.classList.contains("current-month-day")||e.classList.remove("current-day")}),activeDay++,weekDayNum++):activeDay==new Date(year,month,0).getDate()&&(e=month+1,month++,activeDay=1,weekDayNum=getDay(new Date(year,month-1,activeDay)),createCalendar(".events__calendar",year,e),selectInCalendar(),addDataInChoiceDay(),addEventsList()),changeEventInFE(),changeArrowsColor()),-1!=weekDayNum&&weekDayNum!=daysOfWeek.length||document.querySelectorAll("[data-calendar-week]").forEach(e=>{const t=e.querySelectorAll("[data-calendar-day]");t.forEach(e=>{e.textContent==activeDay&&addDataInFE(t)}),-1==weekDayNum?weekDayNum=daysOfWeek.length-1:weekDayNum==daysOfWeek.length&&(weekDayNum=0)}),t.forEach(e=>{e.textContent==activeDay&&e.classList.add("current-day")}),changeActiveFEDay(),addDataInChoiceDay()})})},changeActiveFEDay=()=>{document.querySelectorAll(".events__finance-evenings-day").forEach(e=>{e.classList.remove("active"),e.getAttribute("id")==activeDay&&e.classList.add("active")})},changeEventInFE=()=>{var e,t,a=document.querySelector(".events__finance-evenings-schedule"),n=(a.innerHTML="",document.createElement("li")),c=(n.classList.add("events__finance-evenings-schedule-item"),document.createElement("div")),r=(c.classList.add("events__finance-evenings-schedule-time"),c.textContent="19:00",document.createElement("p"));r.classList.add("events__finance-evenings-schedule-description");let d;d=new Date(2024,2,1);var o=new Date(year,month-1,activeDay),s=o.getTime()-d.getTime();let l=Math.floor(s/864e5);l>eventsList.length-1&&0!=eventsList.length&&(e=activeDay,t=month-1,d=new Date(year,t,e),s=o.getTime()-d.getTime(),l=Math.floor(s/864e5)),r.textContent=eventsList[l],n.appendChild(c),n.appendChild(r),a.appendChild(n)},changeArrowsColor=()=>{1==activeDay&&month==currentMonth?(document.getElementById("arrow-left--left").style.display="block",document.getElementById("arrow-left--right").style.display="none"):(document.getElementById("arrow-left--left").style.display="none",document.getElementById("arrow-left--right").style.display="block")},addEventsList=()=>{var n=document.querySelector(".events__calendar-special");n.innerHTML="";for(let a=0;a<new Date(year,month,0).getDate();a++){var c=document.createElement("li"),r=(c.classList.add("events__calendar-special-item"),document.createElement("div")),d=(r.classList.add("events__calendar-special-date-wrapper"),document.createElement("div")),o=(d.classList.add("events__calendar-special-date"),document.createElement("div")),s=(o.classList.add("events__calendar-special-day"),document.createElement("div")),l=(s.classList.add("events__calendar-special-month"),d.appendChild(o),d.appendChild(s),document.createElement("p")),d=(l.classList.add("events__calendar-special-week"),r.appendChild(d),r.appendChild(l),document.createElement("h4")),r=(d.classList.add("events__calendar-special-title"),c.appendChild(r),c.appendChild(d),o.textContent=a+1,getDay(new Date(year,month-1,a+1)));l.textContent=daysOfWeek[r],s.textContent=whichMonthNames[month-1],n.appendChild(c);let e=new Date(2024,2,1);o=new Date(year,month-1,a+1),l=o.getTime()-e.getTime();let t=Math.floor(l/864e5);t>eventsList.length-1&&(r=activeDay,s=month,e=new Date(year,s,r),l=o.getTime()-e.getTime(),t=Math.floor(l/864e5)),d.textContent=eventsList[t]}},changeDayFromEventsList=()=>{document.querySelector(".events__calendar-special").addEventListener("click",e=>{var e=e.target.closest(".events__calendar-special-item");e&&(document.querySelectorAll("[data-calendar-day]").forEach(e=>{e.textContent==activeDay&&e.textContent!=currentDay&&e.classList.remove("current-day")}),e=e.querySelector(".events__calendar-special-day"),activeDay=e.textContent,weekDayNum=getDay(new Date(year,month-1,activeDay)),document.querySelectorAll("[data-calendar-day]").forEach(e=>{e.textContent==activeDay&&e.classList.add("current-day")}),addDataInChoiceDay(),document.querySelectorAll("[data-calendar-week]").forEach(e=>{const t=e.querySelectorAll("[data-calendar-day]");t.forEach(e=>{e.textContent==activeDay&&addDataInFE(t)})}),changeEventInFE())})},mainFunction=()=>{createCalendar(".events__calendar",year,month),selectInCalendar(),addDataInChoiceDay(),changeDayFromArrows(),changeEventInFE(),changeArrowsColor(),addEventsList(),changeDayFromEventsList()};mainFunction();